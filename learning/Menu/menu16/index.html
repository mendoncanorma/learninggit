<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>jQuery Animated Side Navigation Menu Plugin - Sidebar</title>

    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400' rel='stylesheet' />
    <link href="../assets/bootstrap.css" type="text/css" rel="stylesheet" />
    

    <style type="text/css">

        body {
            margin: 0;
            font-size: 20px;
            font-family: "Source Sans Pro", helvetica, sans-serif;
            font-weight: 200;
            color: #6e6e6e; 
        }

        a {
            color: #515151;
            text-decoration: none; }

        p {
            margin-top: 0;
            margin-bottom: 0;
            padding-top: 10px;
            padding-bottom: 10px; }

        h1 {
            font-weight: 200; }

        ul {
            list-style-type: none;
            padding: 0; }

        ::selection {
            background-color: #e77878;
            color: white; }

        .wrapper {
            width: 100%;
            box-sizing: border-box;
            border-top: 2px solid #6c6c6c;
            background-color: #fefefe; }

        .link-menu {
            font-size: 2.2rem; }

        .link-menu:hover {
            color: #807d7d; }

        .main-content {
            padding-top: 80px;
            padding-bottom: 80px;
            text-align: center; }

        .headline {
            font-size: 3.6rem;
            font-weight: 400; }

        .headline-main {
            color: #3c3c3c; }

        .download {
            padding-top: 40px; }

        .btn-download {
            display: inline-block;
            text-align: center;
            padding: 6px;
            background-color: #424242;
            color: white;
            border: 2px solid #6c6c6c;
            font-size: 1.2rem; }

        .btn-download:hover {
            background-color: #6c6c6c;
            color: #ececec;
            border: 2px solid #424242; }

        .sidebar {
            background-color: #312f2f; }

        .sidebar li + li {
            margin-top: 12px; }

        .sidebar li a {
            padding: 4px 10px;
            display: block;
            color: #cecece; }

        .sidebar li a:hover {
            background-color: #424242; }

        .sidebar li a.current {
            background-color: #6b6464; }        
        
        
        html, body {
            height: 100%; }

        .jsc-sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 220px;
            height: 100%; }

        .jsc-sidebar-content {
            position: relative;
            top: 0;
            left: 0;
            min-height: 100%;
            z-index: 10;
            background-color: white; 
        }

        .jsc-sidebar-pulled {
            transition: transform 0.5s ease;
            transform: translate3d(0, 0, 0);
            -webkit-backface-visibility: hidden;
            -webkit-perspective: 1000; 
        }

        .jsc-sidebar-pushed {
            transform: translate3d(220px, 0, 0);
        }

        .jsc-sidebar-scroll-disabled {
            position: fixed;
            overflow: hidden; 
        }        
    </style>
    
    <!--[if lt IE 9]>
        <script src="js/lib/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

    <div class="wrapper jsc-sidebar-content jsc-sidebar-pulled">
        <nav>
            <a href="#" class="icon-menu link-menu jsc-sidebar-trigger">
                <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
            </a>
        </nav>
        <section class="main-content">
            <h1 class="headline">jQuery Sidebar Plugin Demo</h1>
            <p>SidebarJS is a jQuery plugin for side navigation.</p>

        </section>
    </div>

    <nav class="sidebar jsc-sidebar" id="jsi-nav" data-sidebar-options="">
        <ul class="sidebar-list">
            <li><a href="http://www.jqueryscript.net/menu/jQuery-Animated-Side-Navigation-Menu-Plugin-Sidebar.html" class="current">Download</a></li>
            <li><a href="http://www.jqueryscript.net/menu/jQuery-Animated-Side-Navigation-Menu-Plugin-Sidebar.html">Back to article</a></li>
            <li><a href="http://www.jqueryscript.net">More jQuery Plugins</a></li>
        </ul>
    </nav>
    
    <script src="../assets/jquery-2.1.1.js"></script>

    <script>
        
        (function (window, $) {
            
            var Sidebar = function (target, opts) {
                this.$sidebar   = $(target);
                this.$body      = $('body');
                this.$content   = this.$body.find('div.jsc-sidebar-content');
                this.sidebarW   = this.$sidebar.width();
                this.opts       = opts;
                this.meta       = this.$sidebar.data('sidebar-options');
            };
            
            Sidebar.prototype = {
                
                defaults: {
                    trigger: null,
                    pullCb: function () {},
                    pushCb: function () {}
                },
                
                pushTransitionEndEvent: 'transitionEnd.push webkitTransitionEnd.push transitionend.push msTransitionEnd.push',

                pullTransitionEndEvent: 'transitionEnd.pull webkitTransitionEnd.pull transitionend.pull msTransitionEnd.pull',
                
                isAndroid: function () {
                    var ua = (window.navigator.userAgent).toLowerCase(),
                        isAndroid = ua.indexOf('android') > -1;

                    // return isAndroid;
                    return true;
                },

                hasTranslate3dSupport: function () {
                    var p = document.createElement('p'),
                        has3dSupport,
                        transforms = {
                            'transform': 'transform',
                            'webkitTransform': '-webkit-transform',
                            'MozTransform': '-moz-transform',
                            'msTransform': '-ms-transform'
                        };

                    this.$body[0].insertBefore(p, null);

                    for (var transform in transforms) {
                        if (p.style[transform] !== undefined) {
                            p.style[transform] = 'translate3d(1px, 1px, 1px)';
                            has3dSupport = window.getComputedStyle(p).getPropertyValue(transforms[transform]);
                        }
                    }
                    this.$body[0].removeChild(p);

                    return (has3dSupport !== undefined && has3dSupport.length && has3dSupport !== 'none');
                },

                detectPushEnd: function () {
                    this.$content
                        .addClass('jsc-sidebar-push-end jsc-sidebar-scroll-disabled')
                        .off(this.pushTransitionEndEvent)
                        .on(this.pullTransitionEndEvent, $.proxy(function () {
                            console.log('on ' + this.pullTransitionEndEvent);
                            this.detectPullEnd();
                            this.config.pullCb();
                        }, this));
                },

                detectPullEnd: function () {
                    this.$content
                        .removeClass('jsc-sidebar-push-end jsc-sidebar-scroll-disabled')
                        .addClass('jsc-sidebar-pull-end')
                        .off(this.pullTransitionEndEvent)
                        .on(this.pushTransitionEndEvent, $.proxy(function () {
                            console.log('on ' + this.pushTransitionEndEvent);
                            this.detectPushEnd();
                        }, this));
                },

                slidePush: function () {
                    var distance = this.sidebarW + 'px';

                    this.$content.stop().animate({
                        marginLeft: distance
                    }).promise().done($.proxy(function () {
                        this.$content.addClass('jsc-sidebar-scroll-disabled');

                        if (!this.$content.data('sidebar-first-click')) {
                            this.$content.data('sidebar-first-click', 1);
                        }

                    }, this));
                },


                slidePull: function () {
                    if (this.$content.data('sidebar-first-click') !== 1 || !this.$content.hasClass('jsc-sidebar-scroll-disabled')) {
                        return;
                    }

                    this.$content.stop().animate({
                        marginLeft: 0
                    }).promise().done($.proxy(function () {
                        this.$content.removeClass('jsc-sidebar-scroll-disabled');
                    }, this));
                },
                
                
                push: function () {
                    if (this.isAndroid() || !this.hasTranslate3dSupport()) {
                        this.slidePush();
                    } else {
                        console.log('push()');
                        this.$content
                            .removeClass('jsc-sidebar-pull-end')
                            .addClass('jsc-sidebar-pushed');
                    }
                },

                pull: function () {
                    if (this.isAndroid() || !this.hasTranslate3dSupport()) {
                        this.slidePull();
                    } else {
                        console.log('pull()');
                        if (!this.$content.hasClass('jsc-sidebar-push-end')) {
                            return;
                        }

                        this.$content.removeClass('jsc-sidebar-pushed');
                    }
                },                
                
                init: function () {
                    this.config     = $.extend({}, this.defaults, this.opts, this.meta);
                    this.$trigger   = this.config.trigger ? this.$body.find(this.config.trigger) : this.$body.find('.jsc-sidebar-trigger');
                    
                    this.detect3dEnabled();
                    this.attachEvent();
                },
                
                detect3dEnabled: function () {
                    if (this.isAndroid() || !this.hasTranslate3dSupport()) {
                        this.$content.removeClass('jsc-sidebar-pulled');
                    }
                },
                
                test: function () {
                    console.log(this);  
                },
                
                attachEvent: function () {
                    this.$trigger.on('click', $.proxy(function(e) {
                        console.log('click push()');
                        e.preventDefault();
                        e.stopPropagation();                        
                        this.push();    
                    }, this));

                    
                    
                    this.$content
                        .on(this.pushTransitionEndEvent, $.proxy(function (e) {
                            console.log('on ' + this.pushTransitionEndEvent);
                            this.detectPushEnd();
                            this.config.pushCb();
                        }, this))
                        .on('click', $.proxy(function (e) {
                            console.log('click pull()');
                            this.pull();
                        }, this));                    
                }
            };
            
            $.fn.sidebar = function (options) {
                return this.each(function () {
                    new Sidebar(this, options).init();
                });
            };
            
        })(window, jQuery);
        
        
        $('#jsi-nav').sidebar({
            trigger: '.jsc-sidebar-trigger',
            pullCb: function() {
                console.log('pull');
            },
            pushCb: function() {
                console.log('push');
            }
        });
    </script>
</body>

</html>